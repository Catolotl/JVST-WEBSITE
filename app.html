<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JVST - Official App</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #ffffff;
            color: #000000;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #ffffff;
            border-bottom: 1px solid #e5e5e5;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .profile-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .profile-pic-small {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #000;
        }

        .profile-initial {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #000;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1rem;
        }

        .auth-btn {
            padding: 8px 20px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Outfit', sans-serif;
        }

        .auth-btn:hover {
            background: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 30px;
        }

        .hero {
            text-align: center;
            padding: 60px 20px;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            letter-spacing: -2px;
        }

        .hero p {
            font-size: 1.3rem;
            color: #666;
            font-weight: 400;
        }

        .app-banner {
            background: linear-gradient(135deg, #f9f9f9 0%, #fff 100%);
            border: 1px solid #e5e5e5;
            border-radius: 20px;
            padding: 50px 40px;
            text-align: center;
            margin-bottom: 40px;
        }

        .app-banner h2 {
            font-size: 2rem;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .app-banner p {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .app-banner .reason {
            display: inline-block;
            background: #fff;
            border: 1px solid #e5e5e5;
            padding: 12px 24px;
            border-radius: 10px;
            margin: 8px;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .countdown-section {
            background: #000;
            color: #fff;
            border-radius: 20px;
            padding: 50px 40px;
            text-align: center;
            margin-bottom: 40px;
        }

        .countdown-section h2 {
            font-size: 2rem;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .countdown-section p {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 40px;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .time-unit {
            background: #fff;
            color: #000;
            border-radius: 12px;
            padding: 24px 28px;
            min-width: 100px;
        }

        .time-value {
            font-size: 3rem;
            font-weight: 700;
            display: block;
            line-height: 1;
        }

        .time-label {
            font-size: 0.9rem;
            opacity: 0.6;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: #f9f9f9;
            border: 1px solid #e5e5e5;
            border-radius: 16px;
            padding: 40px 30px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.1);
            border-color: #000;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .feature-card h3 {
            font-size: 1.4rem;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .feature-card p {
            color: #666;
            line-height: 1.6;
            font-size: 1rem;
        }

        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .quick-link {
            background: #000;
            color: #fff;
            padding: 24px;
            border-radius: 12px;
            text-align: center;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
        }

        .quick-link:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .status-banner {
            background: #000;
            color: #fff;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 500;
        }

        .hidden {
            display: none !important;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            font-size: 0.9rem;
            border-top: 1px solid #e5e5e5;
            margin-top: 80px;
        }

        .admin-panel {
            background: #f9f9f9;
            border: 1px solid #e5e5e5;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .admin-panel h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            background: #fff;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            color: #000;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
        }

        .form-group input:focus {
            outline: none;
            border-color: #000;
        }

        .btn {
            padding: 12px 24px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .toggle-switch {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            user-select: none;
        }

        .switch {
            position: relative;
            width: 50px;
            height: 28px;
            background: #e5e5e5;
            border-radius: 14px;
            transition: all 0.3s;
        }

        .switch.active {
            background: #000;
        }

        .switch-handle {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: #fff;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .switch.active .switch-handle {
            left: 25px;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 3rem;
            }
            
            .time-unit {
                padding: 20px 24px;
                min-width: 80px;
            }
            
            .time-value {
                font-size: 2.5rem;
            }

            .app-banner .reason {
                display: block;
                margin: 8px 0;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">JVST</div>
        <div id="headerContent"></div>
    </div>

    <div class="container">
        <div class="hero">
            <h1 id="welcomeTitle">Welcome</h1>
            <p id="welcomeSubtitle">Your premium digital experience</p>
        </div>

        <div id="statusBanner" class="status-banner hidden">
            <span id="statusText">‚ú® Connected to Blade Card</span>
        </div>

        <div id="countdownSection" class="countdown-section hidden">
            <h2>üéµ Tunes Launch</h2>
            <p>Get ready for the next generation of music streaming</p>
            <div class="countdown-timer" id="countdownTimer">
                <div class="time-unit">
                    <span class="time-value" id="days">00</span>
                    <span class="time-label">Days</span>
                </div>
                <div class="time-unit">
                    <span class="time-value" id="hours">00</span>
                    <span class="time-label">Hours</span>
                </div>
                <div class="time-unit">
                    <span class="time-value" id="minutes">00</span>
                    <span class="time-label">Minutes</span>
                </div>
                <div class="time-unit">
                    <span class="time-value" id="seconds">00</span>
                    <span class="time-label">Seconds</span>
                </div>
            </div>
        </div>

        <div id="adminPanel" class="admin-panel hidden">
            <h3>‚öôÔ∏è Countdown Settings</h3>
            
            <div class="form-group">
                <label class="toggle-switch">
                    <span>Enable Countdown</span>
                    <div class="switch" id="countdownToggle" onclick="toggleCountdown()">
                        <div class="switch-handle"></div>
                    </div>
                </label>
            </div>

            <div id="countdownSettings" class="hidden">
                <div class="form-group">
                    <label for="targetDate">Target Date & Time</label>
                    <input type="datetime-local" id="targetDate">
                </div>

                <div class="form-group">
                    <label for="countdownTitle">Countdown Title</label>
                    <input type="text" id="countdownTitle" placeholder="üéµ Tunes Launch">
                </div>

                <div class="form-group">
                    <label for="countdownDesc">Description</label>
                    <input type="text" id="countdownDesc" placeholder="Get ready for the next generation...">
                </div>

                <button class="btn" onclick="saveCountdownSettings()">Save Settings</button>
            </div>
        </div>

        <div style="margin-bottom: 50px;">
            <h2 style="font-size: 1.8rem; margin-bottom: 24px; font-weight: 600;">Your Dashboard</h2>
            <div style="background: #f9f9f9; border: 1px solid #e5e5e5; border-radius: 16px; padding: 40px 30px;">
                <div id="dashboardContent">
                    <div style="text-align: center; padding: 40px 20px; color: #999;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üìä</div>
                        <p style="font-size: 1.1rem;">Sign in to view your personalized dashboard</p>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 50px;">
            <h2 style="font-size: 1.8rem; margin-bottom: 24px; font-weight: 600;">Quick Access</h2>
            <div class="features-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                <div class="feature-card" style="padding: 30px 20px;" id="tunesCard">
                    <span class="feature-icon" style="font-size: 2.5rem;">üéµ</span>
                    <h3 style="font-size: 1.2rem;">Tunes</h3>
                    <p style="font-size: 0.9rem;">Music streaming</p>
                </div>

                <div class="feature-card" style="padding: 30px 20px;" id="tvCard">
                    <span class="feature-icon" style="font-size: 2.5rem;">üì∫</span>
                    <h3 style="font-size: 1.2rem;">TV</h3>
                    <p style="font-size: 0.9rem;">Video content</p>
                </div>

                <div class="feature-card" style="padding: 30px 20px;" id="indyCard">
                    <span class="feature-icon" style="font-size: 2.5rem;">ü§ñ</span>
                    <h3 style="font-size: 1.2rem;">Indy+</h3>
                    <p style="font-size: 0.9rem;">AI tools</p>
                </div>

                <div class="feature-card" style="padding: 30px 20px;" id="miniCard">
                    <span class="feature-icon" style="font-size: 2.5rem;">‚ö°</span>
                    <h3 style="font-size: 1.2rem;">mini-crafts</h3>
                    <p style="font-size: 0.9rem;">Creative tools</p>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 50px;">
            <h2 style="font-size: 1.8rem; margin-bottom: 24px; font-weight: 600;">Recent Activity</h2>
            <div style="background: #f9f9f9; border: 1px solid #e5e5e5; border-radius: 16px; padding: 30px;">
                <div id="notificationsContent">
                    <div style="text-align: center; padding: 30px 20px; color: #999;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üîî</div>
                        <p style="font-size: 1.1rem;">No new notifications</p>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 50px;">
            <h2 style="font-size: 1.8rem; margin-bottom: 24px; font-weight: 600;">More</h2>
            <div class="features-grid">
                <div class="feature-card" onclick="openLink('https://www.shopjust.store')">
                    <span class="feature-icon">üåê</span>
                    <h3>JVST Website</h3>
                    <p>Visit shopjust.store</p>
                </div>

                <div class="feature-card" onclick="openLink('https://www.shopjust.store/bladecard.html')">
                    <span class="feature-icon">üí≥</span>
                    <h3>Blade Card</h3>
                    <p>Manage membership</p>
                </div>
            </div>
        </div>


    </div>

    <footer>
        ¬© 2026 J V S T ‚Ä¢ Official App ‚Ä¢ <span id="versionInfo"></span>
    </footer>

    <script>
        let userData = null;
        let countdownInterval = null;
        let countdownSettings = {
            enabled: false,
            targetDate: null,
            title: 'üéµ Tunes Launch',
            description: 'Get ready for the next generation of music streaming'
        };

        // Admin password for countdown settings (change this to whatever you want)
        const ADMIN_PASSWORD = 'jvst2026';
        let isAdmin = false;

        function initApp() {
            loadUserData();
            loadCountdownSettings();
            updateUI();
            checkAdminAccess();
        }

        function loadUserData() {
            const savedData = localStorage.getItem('bladeUserData');
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    if (parsedData.isLoggedIn) {
                        userData = parsedData;
                    }
                } catch (e) {
                    console.error('Error loading user data:', e);
                }
            }
        }

        function loadCountdownSettings() {
            const saved = localStorage.getItem('jvstCountdownSettings');
            if (saved) {
                try {
                    countdownSettings = JSON.parse(saved);
                } catch (e) {
                    console.error('Error loading countdown settings:', e);
                }
            }
        }

        function saveCountdownSettings() {
            const targetDate = document.getElementById('targetDate').value;
            const title = document.getElementById('countdownTitle').value;
            const desc = document.getElementById('countdownDesc').value;

            if (targetDate) {
                countdownSettings.targetDate = new Date(targetDate).getTime();
            }
            if (title) {
                countdownSettings.title = title;
            }
            if (desc) {
                countdownSettings.description = desc;
            }

            localStorage.setItem('jvstCountdownSettings', JSON.stringify(countdownSettings));
            updateUI();
            alert('Countdown settings saved!');
        }

        function toggleCountdown() {
            countdownSettings.enabled = !countdownSettings.enabled;
            localStorage.setItem('jvstCountdownSettings', JSON.stringify(countdownSettings));
            
            const toggle = document.getElementById('countdownToggle');
            const settings = document.getElementById('countdownSettings');
            
            if (countdownSettings.enabled) {
                toggle.classList.add('active');
                settings.classList.remove('hidden');
            } else {
                toggle.classList.remove('active');
                settings.classList.add('hidden');
            }
            
            updateUI();
        }

        function checkAdminAccess() {
            // Check if user pressed Ctrl+Shift+A
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    const password = prompt('Enter admin password:');
                    if (password === ADMIN_PASSWORD) {
                        isAdmin = true;
                        updateUI();
                        alert('Admin mode activated!');
                    }
                }
            });
        }

        function updateUI() {
            const headerContent = document.getElementById('headerContent');
            const welcomeTitle = document.getElementById('welcomeTitle');
            const welcomeSubtitle = document.getElementById('welcomeSubtitle');
            const statusBanner = document.getElementById('statusBanner');
            const countdownSection = document.getElementById('countdownSection');
            const adminPanel = document.getElementById('adminPanel');
            const tunesCard = document.getElementById('tunesCard');
            const tvCard = document.getElementById('tvCard');
            const indyCard = document.getElementById('indyCard');
            const miniCard = document.getElementById('miniCard');
            const versionInfo = document.getElementById('versionInfo');
            const dashboardContent = document.getElementById('dashboardContent');
            const notificationsContent = document.getElementById('notificationsContent');

            // Update header and welcome message
            if (userData) {
                const firstName = userData.name.split(' ')[0];
                const initial = userData.name.charAt(0).toUpperCase();
                
                welcomeTitle.textContent = `Welcome back, ${firstName}`;
                welcomeSubtitle.textContent = 'Everything you need in one place';
                
                if (userData.profilePic) {
                    headerContent.innerHTML = `
                        <div class="profile-section">
                            <img src="${userData.profilePic}" class="profile-pic-small" alt="Profile">
                            <span style="font-weight: 500;">${firstName}</span>
                        </div>
                    `;
                } else {
                    headerContent.innerHTML = `
                        <div class="profile-section">
                            <div class="profile-initial">${initial}</div>
                            <span style="font-weight: 500;">${firstName}</span>
                        </div>
                    `;
                }

                statusBanner.classList.remove('hidden');
                
                if (userData.isPremium) {
                    statusBanner.innerHTML = '‚ú® Connected to Blade Card ‚Ä¢ Premium Member';
                    if (userData.isPlus) {
                        statusBanner.innerHTML = '‚≠ê Connected to Blade Card ‚Ä¢ Plus Member';
                    }
                } else {
                    statusBanner.innerHTML = 'üí≥ Connected to Blade Card';
                }

                // Show dashboard with user stats
                const totalHours = Math.floor(Math.random() * 100) + 50;
                const songsPlayed = Math.floor(Math.random() * 500) + 200;
                const showsWatched = Math.floor(Math.random() * 50) + 10;
                
                dashboardContent.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center;">
                        <div style="background: #fff; padding: 30px 20px; border-radius: 12px; border: 1px solid #e5e5e5;">
                            <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 8px;">${totalHours}h</div>
                            <div style="color: #666; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Streaming Time</div>
                        </div>
                        <div style="background: #fff; padding: 30px 20px; border-radius: 12px; border: 1px solid #e5e5e5;">
                            <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 8px;">${songsPlayed}</div>
                            <div style="color: #666; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Songs</div>
                        </div>
                        <div style="background: #fff; padding: 30px 20px; border-radius: 12px; border: 1px solid #e5e5e5;">
                            <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 8px;">${showsWatched}</div>
                            <div style="color: #666; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Shows</div>
                        </div>
                    </div>
                    <div style="margin-top: 30px; padding: 24px; background: #fff; border-radius: 12px; border: 1px solid #e5e5e5;">
                        <h4 style="font-size: 1.1rem; margin-bottom: 16px; font-weight: 600;">This Week</h4>
                        <div style="text-align: left; color: #666; line-height: 2;">
                            <div style="padding: 12px 0; border-bottom: 1px solid #f0f0f0;">üéµ Listening to "Summer Vibes" playlist</div>
                            <div style="padding: 12px 0; border-bottom: 1px solid #f0f0f0;">üì∫ Watching "The New Series" Episode 3</div>
                            <div style="padding: 12px 0;">ü§ñ Using Indy+ for projects</div>
                        </div>
                    </div>
                `;

                // Show notifications
                const notifications = [
                    { icon: 'üéµ', title: 'New album available', desc: 'Check out the latest from your favorite artist', time: '2h ago' },
                    { icon: 'üì∫', title: 'New episode streaming', desc: 'The New Series S2E4 is ready to watch', time: '5h ago' },
                    { icon: '‚≠ê', title: 'Weekly recap', desc: 'Your listening stats are ready', time: '1d ago' }
                ];

                notificationsContent.innerHTML = notifications.map(notif => `
                    <div style="display: flex; gap: 16px; padding: 20px; background: #fff; border-radius: 12px; margin-bottom: 12px; border: 1px solid #e5e5e5; align-items: start;">
                        <div style="font-size: 2rem;">${notif.icon}</div>
                        <div style="flex: 1;">
                            <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 4px;">${notif.title}</h4>
                            <p style="color: #666; font-size: 0.9rem; margin-bottom: 8px;">${notif.desc}</p>
                            <span style="color: #999; font-size: 0.85rem;">${notif.time}</span>
                        </div>
                    </div>
                `).join('');

                accountBtn.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                
                // Update card access
                if (userData.isPremium) {
                    tunesCard.onclick = () => openLink('https://www.shopjust.store/tunes.html');
                    tvCard.onclick = () => openLink('https://www.shopjust.store/tv.html');
                    
                    if (userData.isPlus) {
                        indyCard.onclick = () => openLink('https://www.shopjust.store/indyplus.html');
                        miniCard.onclick = () => openLink('https://www.mini-crafts.com');
                    } else {
                        indyCard.onclick = () => alert('Upgrade to Plus for access to Indy+');
                        miniCard.onclick = () => alert('Upgrade to Plus for access to mini-crafts');
                    }
                } else {
                    tunesCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                    tvCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                    indyCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                    miniCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                }
            } else {
                welcomeTitle.textContent = 'Welcome to JVST';
                welcomeSubtitle.textContent = 'Sign in to get started';
                
                headerContent.innerHTML = '<button class="auth-btn" onclick="openLink(\'https://www.shopjust.store/bladecard.html\')">Sign In</button>';
                statusBanner.classList.add('hidden');
                
                // Show empty states when not logged in
                dashboardContent.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #999;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üìä</div>
                        <p style="font-size: 1.1rem;">Sign in to view your personalized dashboard</p>
                    </div>
                `;
                
                notificationsContent.innerHTML = `
                    <div style="text-align: center; padding: 30px 20px; color: #999;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">‚ú®</div>
                        <p style="font-size: 1.1rem;">You're all caught up!</p>
                    </div>
                `;
                
                accountBtn.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                
                // All cards redirect to blade card when not logged in
                tunesCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                tvCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                indyCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
                miniCard.onclick = () => openLink('https://www.shopjust.store/bladecard.html');
            }

            // Update countdown
            if (countdownSettings.enabled && countdownSettings.targetDate) {
                countdownSection.classList.remove('hidden');
                countdownSection.querySelector('h2').textContent = countdownSettings.title;
                countdownSection.querySelector('p').textContent = countdownSettings.description;
                startCountdown();
            } else {
                countdownSection.classList.add('hidden');
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                }
            }

            // Show admin panel if admin
            if (isAdmin) {
                adminPanel.classList.remove('hidden');
                const toggle = document.getElementById('countdownToggle');
                const settings = document.getElementById('countdownSettings');
                
                if (countdownSettings.enabled) {
                    toggle.classList.add('active');
                    settings.classList.remove('hidden');
                    
                    // Set current values
                    if (countdownSettings.targetDate) {
                        const date = new Date(countdownSettings.targetDate);
                        document.getElementById('targetDate').value = date.toISOString().slice(0, 16);
                    }
                    document.getElementById('countdownTitle').value = countdownSettings.title;
                    document.getElementById('countdownDesc').value = countdownSettings.description;
                } else {
                    settings.classList.add('hidden');
                }
            }

            // Version info
            versionInfo.textContent = 'v1.0.0';
        }

        function startCountdown() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }

            countdownInterval = setInterval(() => {
                const now = new Date().getTime();
                const distance = countdownSettings.targetDate - now;

                if (distance < 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('days').textContent = '00';
                    document.getElementById('hours').textContent = '00';
                    document.getElementById('minutes').textContent = '00';
                    document.getElementById('seconds').textContent = '00';
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = String(days).padStart(2, '0');
                document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
            }, 1000);
        }

        function openLink(url) {
            window.open(url, '_blank');
        }

        // Listen for storage changes from other tabs
        window.addEventListener('storage', function(e) {
            if (e.key === 'bladeUserData') {
                loadUserData();
                updateUI();
            }
        });

        initApp();
    </script>

</body>
</html>
